try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fa038534-a5a8-4f43-9fe3-fd2cb2482c4a",e._sentryDebugIdIdentifier="sentry-dbid-fa038534-a5a8-4f43-9fe3-fd2cb2482c4a")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63723],{0x26b0b403:(e,t,n)=>{function o(e){return"text"===e.type&&e.text?{...e,text:e.text.replace("​","")}:e.content?{...e,content:e.content.map(o)}:e}n.d(t,{DV:()=>o,Oe:()=>a,h0:()=>r});let a=e=>{let t=new Set,n=e=>{if("codeBlock"===e.type&&t.add("pre"),"bulletList"===e.type&&t.add("ul"),"orderedList"===e.type&&t.add("ol"),"text"===e.type&&e.marks)for(let n of e.marks)t.add(n.type);if(e.content)for(let t of e.content)n(t)};return n(e),Array.from(t).map(e=>"".concat(":").concat(e)).sort().join("")},r=e=>{let t="",n=0,o=function(e){var a,r,i;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("doc"===e.type&&e.content)for(let t of e.content)o(t);else if("paragraph"===e.type){if(e.content)for(let t of e.content)o(t);t+="\n"}else if("text"===e.type){let n=e.text;if(e.marks)for(let t of e.marks)"bold"===t.type?n="**".concat(n,"**"):"italic"===t.type?n="*".concat(n,"*"):"underline"===t.type?n="__".concat(n,"__"):"strike"===t.type?n="~~".concat(n,"~~"):"code"===t.type&&(n="`".concat(n,"`"));t+=n}else if("codeBlock"===e.type){let n=e.attrs&&"string"==typeof e.attrs.language?e.attrs.language:"";if(t+="\n```".concat(n,"\n"),e.content)for(let t of e.content)o(t);t+="\n```\n\n"}else if("bulletList"===e.type&&e.content)for(let t of e.content)o(t);else if("orderedList"===e.type&&e.content)for(let t=0;t<e.content.length;t++)o(e.content[t],t+1,!0);else if("listItem"===e.type&&e.content){let a="   ".repeat(n);for(let r of(s?t+="".concat(a).concat(l,". "):t+="".concat(a,"* "),e.content))n+=1,o(r),n-=1}else if("mention"===e.type){let n=(null==(a=e.attrs)?void 0:a.renderedText)||(null==(r=e.attrs)?void 0:r.label)||"";t+="@".concat(n)}else if("skillChip"===e.type){let n=(null==(i=e.attrs)?void 0:i.skillName)||"";t+="/".concat(n)}};return o(e),t.replace("​","").trim()}},0x57fb2d0b:(e,t,n)=>{n.d(t,{E:()=>u});var o=n(0x16784b660),a=n(0x16db0212f),r=n(0x26b0b403),i=n(0x18e5c6e75);let l={type:"doc",content:[{type:"paragraph",content:[]}]};var s=n(0x733b8fe2),d=n.n(s);let u=e=>{let{conversationId:t="default",enableV2:n=!1,storage:s}=e,u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...((e,t)=>({tipTapEditorState:l,getPrompt:()=>(0,r.h0)(t().tipTapEditorState),setPrompt:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{forceUpdateTiptap:a=!1,unsafe:r=!1}=o,l=(0,i.P)(n),s={type:"doc",content:[{type:"paragraph",content:l?[{type:"text",text:l}]:[]}]};if(l.length>0&&r&&(s.__ant_unsafe=!0),e({tipTapEditorState:s}),a){var d;let e=null==(d=t().promptInputRef)?void 0:d.current;e&&(e.setContent(l),e.focus(),e.scrollToEnd())}return l},setTipTapEditorJSON:n=>{let o=!0===t().tipTapEditorState.__ant_unsafe,a=(0,r.h0)(n);return a.length>0&&o&&(n.__ant_unsafe=!0),e({tipTapEditorState:n}),a},clearPrompt:()=>{e({tipTapEditorState:l})},clearAllInput:()=>{e({tipTapEditorState:l,attachments:[],files:[],syncSourceUuids:[]})}}))(...t),...((e,t)=>({attachments:[],files:[],syncSourceUuids:[],transitionFiles:[],setAttachments:n=>{e({attachments:"function"==typeof n?n(t().attachments):n})},setFiles:n=>{e({files:"function"==typeof n?n(t().files):n})},setSyncSourceUuids:n=>{e({syncSourceUuids:"function"==typeof n?n(t().syncSourceUuids):n})},setTransitionFiles:t=>{e({transitionFiles:t})}}))(...t),...(e=>({model:"",projectUuid:void 0,pendingConversationSettings:{},conversation:void 0,setModel:t=>e({model:t}),setProjectUuid:t=>e({projectUuid:t}),setPendingConversationSettings:t=>e(e=>({pendingConversationSettings:{...e.pendingConversationSettings,...t}})),setConversation:t=>e({conversation:t})}))(...t),...(e=>({previewPrompt:void 0,isModelSelectorOpen:!1,hasBlockingWarning:!1,personalizedStyle:void 0,includeProfilePreferences:!0,currentCompassTask:void 0,setPreviewPrompt:t=>e({previewPrompt:t}),setIsModelSelectorOpen:t=>e({isModelSelectorOpen:t}),setHasBlockingWarning:t=>e({hasBlockingWarning:t}),setPersonalizedStyle:t=>e({personalizedStyle:t}),setIncludeProfilePreferences:t=>e({includeProfilePreferences:t}),setCurrentCompassTask:t=>e({currentCompassTask:t})}))(...t),...(e=>({isUploadingFile:!1,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingFile:t=>e({isUploadingFile:t}),setIsUploadingDriveSync:t=>e({isUploadingDriveSync:t}),setIsUploadingGithubSync:t=>e({isUploadingGithubSync:t})}))(...t),...(e=>({isSending:!1,isImprovingPrompt:!1,setIsSending:t=>e({isSending:t}),setIsImprovingPrompt:t=>e({isImprovingPrompt:t})}))(...t),...(()=>({isAtMaxNumUploads:!1,hasAttachments:!1,isChatSyncing:!1,isProjectSyncing:!1,isNewConversation:!1,isProjectLocked:!1,willRedirectOnSubmit:!1}))(...t),...(()=>({sendMessage:void 0,sendTransparentMessage:void 0,stopSampling:void 0,focusInput:void 0,improvePrompt:void 0,validateMaxUploadLimit:void 0,onDrop:void 0,onPasteFiles:void 0,handleUpload:void 0,uploadInputProps:void 0}))(...t),...(e=>({promptInputRef:void 0,setPromptInputRef:t=>e({promptInputRef:t})}))(...t)}};if(n){let e=function(e){var t,n,o;let a=null!=(o=null==(t=(n=crypto).randomUUID)?void 0:t.call(n))?o:"v2-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2)),r=d()((t,n)=>{let o=n.state,r=Date.now();if(void 0!==o.tipTapEditorState){let n={value:o.tipTapEditorState||{},tabId:a,timestamp:r};e.setItem("LSS-".concat(t,":textInput"),JSON.stringify(n))}if(void 0!==o.attachments){let n={value:o.attachments||[],tabId:a,timestamp:r};e.setItem("LSS-".concat(t,":attachment"),JSON.stringify(n))}if(void 0!==o.files){let n={value:o.files||[],tabId:a,timestamp:r};e.setItem("LSS-".concat(t,":files"),JSON.stringify(n))}if(void 0!==o.syncSourceUuids){let n={value:o.syncSourceUuids||[],tabId:a,timestamp:r};e.setItem("LSS-".concat(t,":syncSourceUuids"),JSON.stringify(n))}},500,{maxWait:2e3});return{getItem:t=>{try{let n={},o=e.getItem("LSS-".concat(t,":textInput"));if(o){let e=JSON.parse(o);e.value&&"object"==typeof e.value&&"type"in e.value&&(n.tipTapEditorState=e.value)}let a=e.getItem("LSS-".concat(t,":attachment"));if(a){let e=JSON.parse(a);Array.isArray(e.value)&&(n.attachments=e.value)}let r=e.getItem("LSS-".concat(t,":files"));if(r){let e=JSON.parse(r);Array.isArray(e.value)&&(n.files=e.value)}let i=e.getItem("LSS-".concat(t,":syncSourceUuids"));if(i){let e=JSON.parse(i);Array.isArray(e.value)&&(n.syncSourceUuids=e.value)}if(Object.keys(n).length>0)return{state:n,version:0};return null}catch(e){return null}},setItem:(e,t)=>{r(e,t)},removeItem:t=>{r.cancel(),e.removeItem("LSS-".concat(t,":textInput")),e.removeItem("LSS-".concat(t,":attachment")),e.removeItem("LSS-".concat(t,":files")),e.removeItem("LSS-".concat(t,":syncSourceUuids"))},subscribe:e=>t=>{let n=n=>{if(n.storageArea===localStorage&&n.key&&n.key.startsWith("LSS-".concat(e,":"))&&n.newValue)try{JSON.parse(n.newValue).tabId!==a&&t()}catch(e){t()}};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}},cleanup:()=>{r.cancel()}}}(s),n=(0,a.y)()((0,o.eh)((0,o.Zr)(u,{name:t,storage:e,partialize:e=>({tipTapEditorState:e.tipTapEditorState,attachments:e.attachments,files:e.files,syncSourceUuids:e.syncSourceUuids})}))),r=()=>e.removeItem(t),i=()=>e.cleanup();return e.subscribe?{store:n,unsubscribe:e.subscribe(t)(()=>{}),clearStorage:r,cleanup:i}:{store:n,clearStorage:r,cleanup:i}}return{store:(0,a.y)()((0,o.eh)(u)),clearStorage:()=>void 0}}},0x9f369389:(e,t,n)=>{var o,a,r,i,l,s,d,u,c,p,f,g,v,m,y,S,h,b,x,w;n.d(t,{EC:()=>M,EG:()=>A,Fd:()=>T,Nj:()=>E,Q2:()=>L,VW:()=>N,Vx:()=>I,Xo:()=>Q,dw:()=>z,f$:()=>C,gD:()=>k,gI:()=>D,lT:()=>P,m_:()=>_,uV:()=>j,wk:()=>O,y7:()=>U,y8:()=>F}),n(0xc6b3c857),null==(o=globalThis["claude.web"])||o.WindowControl;let _=null==(a=globalThis["claude.web"])?void 0:a.QuickEntry,C=null==(r=globalThis["claude.web"])?void 0:r.LocalSessions,T=null==(i=globalThis["claude.web"])?void 0:i.LocalAgentModeSessions,j=null==(l=globalThis["claude.web"])?void 0:l.AgentModeFeedback,k=null==(s=globalThis["claude.web"])?void 0:s.Account,I=null==(d=globalThis["claude.web"])?void 0:d.Navigation,P=null==(u=globalThis["claude.web"])?void 0:u.DeepLink,U=null==(c=globalThis["claude.web"])?void 0:c.WindowState,F=null==(p=globalThis["claude.web"])?void 0:p.Toast,L=null==(f=globalThis["claude.web"])?void 0:f.FileSystem;null==(g=globalThis["claude.web"])||g.OpenDocuments;let E=null==(v=globalThis["claude.web"])?void 0:v.Auth,M=null==(m=globalThis["claude.web"])?void 0:m.Resources,D=null==(y=globalThis["claude.web"])?void 0:y.ClaudeCode,A=null==(S=globalThis["claude.web"])?void 0:S.ClaudeVM,N=null==(h=globalThis["claude.web"])?void 0:h.LocalSessionEnvironment,z=null==(b=globalThis["claude.web"])?void 0:b.DesktopNotifications,Q=null==(x=globalThis["claude.web"])?void 0:x.AutoUpdater,O=null==(w=globalThis["claude.web"])?void 0:w.LocalKBs},0xbebfc702:(e,t,n)=>{n.d(t,{BN:()=>P,CB:()=>h,GQ:()=>F,Gz:()=>U,Kf:()=>x,LQ:()=>I,PL:()=>S,Zd:()=>A,bL:()=>T,bs:()=>w,dx:()=>v,eW:()=>k,fo:()=>_,gM:()=>m,gr:()=>y,kj:()=>D,mu:()=>E,my:()=>M,nl:()=>N,sC:()=>g,sS:()=>j,tz:()=>z,u7:()=>b,xQ:()=>L});var o=n(0x628a9a0b),a=n(0x12c9046cd),r=n(0x14de19ae8),i=n(0x139b5e710),l=n(0x1016c6ed2),s=n(0x49fac030),d=n(0xac309a83),u=n(0x17e725145),c=n(0xfc89b4a4),p=n(0x1ab0d1ca1),f=n(0xd5e0c33c);let g=30,v=1e4;var m=function(e){return e.Student="student",e.Meeting="meeting",e.Haystack="haystack",e}({}),y=function(e){return e.Study="study",e.Career="career",e.Research="research",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let S=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[s.Wy,{orgUuid:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof l.LG&&"permission_error"===e.type}})},h=e=>{let{enabled:t=!0,limit:n,offset:o,starred:i,creatorFilter:l,projectFilter:d,orderBy:u,type:c}=e,{activeOrganization:g}=(0,r.YL)(),v=(0,f.K)(),m=null==g?void 0:g.uuid,y=(0,p.A)(),S=new URLSearchParams;return S.append("include_harmony_projects","true"),void 0!==n&&S.append("limit",n.toString()),void 0!==o&&S.append("offset",o.toString()),void 0!==i&&S.append("starred",i.toString()),void 0!==l&&S.append("creator_filter",l.toString()),void 0!==d&&S.append("filter",d.toString()),void 0!==u&&S.append("order_by",u.toString()),void 0!==c&&S.append("type",c.toString()),(0,a.Sk)("/api/organizations/".concat(m,"/projects?").concat(S.toString()),{queryKey:[s.BP,{orgUuid:m},{limit:n,offset:o,starred:i,creatorFilter:l,projectFilter:d,orderBy:u,type:c}],enabled:!!(t&&g&&v),select:e=>{let t=e.length===n;return Object.assign(e.filter(e=>!e.archived_at).map(e=>"haystack"===e.type?{...e,unformattedName:e.name,name:y.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e),{hasMore:t})}})},b=e=>{let{enabled:t=!0,limit:n=g,offset:o=0,starred:i,creatorFilter:l,projectFilter:d,orderBy:u,searchQuery:c,isArchived:p}=e,{activeOrganization:v}=(0,r.YL)(),m=(0,f.K)(),y=null==v?void 0:v.uuid,S=new URLSearchParams;return S.append("limit",n.toString()),S.append("offset",o.toString()),void 0!==i&&S.append("starred",i.toString()),void 0!==l&&S.append("creator_filter",l.toString()),void 0!==d&&S.append("filter",d.toString()),void 0!==u&&S.append("order_by",u.toString()),void 0!==c&&S.append("searchQuery",c.toString()),void 0!==p&&S.append("is_archived",p.toString()),(0,a.Sk)("/api/organizations/".concat(y,"/projects_v2?").concat(S.toString()),{queryKey:[s.Wf,{orgUuid:y},{limit:n,offset:o,starred:i,creatorFilter:l,projectFilter:d,orderBy:u,searchQuery:c,isArchived:p}],enabled:!!(t&&v&&m)})},x=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,a.mn)();return(0,c.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},w=()=>{let e=x(),t=(0,o.uE)();return(0,c.useCallback)(async()=>{let[n,a]=await Promise.all([e(),t({limit:o.dy})]);return((e,t)=>{let n=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),o=null==e?void 0:e.filter(e=>!n.find(t=>t.uuid===e.uuid));return[...n,...o]})(n,a)},[t,e])},_=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=(0,p.A)();return(0,a.Sk)("/api/organizations/".concat(n,"/projects/").concat(e),{queryKey:[s.hc,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof l.LG&&(404===e.statusCode||403===e.statusCode)},select:e=>"haystack"===e.type?{...e,unformattedName:e.name,name:o.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e})},C=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,u.useQueryClient)();return{addProject:e=>{n.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:[e,...t.data],pagination:{...t.pagination,total:t.pagination.total+1}}:t),n.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?[e,...t]:t),n.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:e.count+1}:e)},removeProject:e=>{n.setQueriesData({queryKey:[s.Wf,{orgUuid:t}]},t=>t?{...t,data:t.data.filter(t=>t.uuid!==e),pagination:{...t.pagination,total:Math.max(0,t.pagination.total-1)}}:t),n.setQueriesData({queryKey:[s.BP,{orgUuid:t}]},t=>t?t.filter(t=>t.uuid!==e):t),n.setQueriesData({queryKey:[s.Wy,{orgUuid:t}]},e=>e?{count:Math.max(0,e.count-1)}:e)}}},T=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=U(),{addProject:o}=C();return(0,a.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:e=>{o(e),n()}})},j=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=U();return(0,a.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{o(e)},queryKey:[s.hc,{orgUuid:n,projectUuid:e}]})},k=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=U(),{removeProject:i}=C();return(0,a.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"DELETE",{onSuccess:()=>{i(e),o(e,{remove:!0})}})},I=function(e){let{limit:t=30,offset:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:o}=(0,r.YL)(),i=null==o?void 0:o.uuid,d=new URLSearchParams;return d.append("limit",t.toString()),d.append("offset",n.toString()),(0,a.Sk)("/api/organizations/".concat(i,"/projects/").concat(e,"/conversations_v2?").concat(d.toString()),{queryKey:[s.yF,{orgUuid:i,projectUuid:e,limit:t,offset:n}],enabled:!!o,staleTime:0,meta:{noToast:e=>e instanceof l.LG&&403===e.statusCode}})},P=()=>{var e,t;let n=h({enabled:!0,creatorFilter:"is_creator",limit:v}),o=null==(t=n.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...n,data:o}},U=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,u.useQueryClient)();return(e,o)=>{let{remove:a=!1}=o||{};if([[s.BP,{orgUuid:t}],[s.Wf,{orgUuid:t}],[s.Wy,{orgUuid:t}]].forEach(e=>void n.invalidateQueries({queryKey:e})),e){let o=a?"removeQueries":"invalidateQueries";[[s.hc,{orgUuid:t,projectUuid:e}],[s.yF,{orgUuid:t,projectUuid:e}],[s.vE,{projectUuid:e}]].forEach(e=>void n[o]({queryKey:e}))}}},F=(e,t)=>{let n=U();return(0,a.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{n(t)}})},L=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=(0,d.fS)("claude_ai_sticky_project_settings");return(0,a.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),{queryKey:[s.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&o)})},E=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,o=(0,d.fS)("claude_ai_sticky_project_settings");return(0,a.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),"PUT",(e,t)=>t?{...t,...e}:void 0,{queryKey:[s.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&o)})},M=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,u.useQueryClient)();return(0,a.L2)(e=>"/api/organizations/".concat(t,"/projects/").concat(e.projectUuid,"/sync"),"POST",{meta:{noToast:!0},onSuccess:(e,o)=>{"done"===e.kb_resync_status&&o.projectUuid&&n.invalidateQueries({queryKey:[s.qz,{orgUuid:t,projectUuid:o.projectUuid}]}),o.projectUuid&&e.gdrive_resource_backfill_triggered&&n.invalidateQueries({queryKey:[s.LV,{orgUuid:t,projectUuid:o.projectUuid}]})}})},D=()=>(0,d.fS)("claudeai_sync_project"),A=()=>{let{mutateAsync:e}=(0,o.x6)();return{moveToProject:(0,c.useCallback)(async function(t,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{batchSize:a=20,batchDelayMs:r=500}=o;if(!t.length||!n)return Promise.resolve({totalMoved:0,totalFailed:0,conversationUuids:[],projectUuid:""});let i=t.length>1,l=0,s=0;if(i){let o=Math.ceil(t.length/a);for(let i=0;i<o;i++){let d=i*a,u=t.slice(d,d+a),c=await e({conversation_uuids:u,project_uuid:n});l+=c.moved.length,s+=c.failed.length,i<o-1&&await new Promise(e=>setTimeout(e,r))}}else{let o=await e({conversation_uuids:t,project_uuid:n});l=o.moved.length,s=o.failed.length}return{totalMoved:l,totalFailed:s,conversationUuids:t,projectUuid:n}},[e])}},N=()=>{let{mutateAsync:e}=(0,o.x6)(),{addSuccess:t,addError:n}=(0,i.Yf)(),a=(0,p.A)(),l=(0,u.useQueryClient)(),{activeOrganization:d}=(0,r.YL)(),f=null==d?void 0:d.uuid,[g,v]=(0,c.useState)(new Set),m=(0,c.useCallback)(async function(r){let{showSuccess:i=!0,showError:d=!0,onSuccess:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.length)return Promise.resolve({moved:[],failed:[]});if(r.some(e=>g.has(e)))return Promise.resolve({moved:[],failed:r});v(e=>{let t=new Set(e);return r.forEach(e=>t.add(e)),t}),r.forEach(e=>{let t=[s.fC,{orgUuid:f},{uuid:e},{returnDanglingHumanMessage:!1}];l.getQueryData(t)&&l.setQueryData(t,e=>e?{...e,project_uuid:void 0}:e)});try{let n=await e({conversation_uuids:r,project_uuid:null});return n.moved.length>0&&i&&t(a.formatMessage({defaultMessage:"Chat removed from project",id:"UkGfrdMZdS"})),null==u||u(n),await (0,o.C4)(l,f,r),n}catch(e){throw await (0,o.C4)(l,f,r),d&&n(a.formatMessage({defaultMessage:"Failed to remove chat from project",id:"4suoYkIuEm"}),{error:e,messageForLogging:"Failed to remove chat from project"}),e}finally{v(e=>{let t=new Set(e);return r.forEach(e=>t.delete(e)),t})}},[e,t,n,a,g,l,f]),y=(0,c.useCallback)(e=>g.has(e),[g]);return{removeFromProject:m,isRemoving:g.size>0,isRemovingConversation:y}},z=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/permissions"),{queryKey:[s._P,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e)})}},0xc6b3c857:(e,t,n)=>{n.d(t,{t4:()=>o});var o=function(e){return e.Idle="idle",e.Checking="checking",e.Downloading="downloading",e.Ready="ready",e.Error="error",e}({})},0xd5e0c33c:(e,t,n)=>{n.d(t,{K:()=>r,p:()=>i});var o=n(0x14de19ae8),a=n(0x78b33fbd);let r=()=>{let e=(0,o.O9)(),t=(0,o.zc)(),n=(0,o.mV)(),r=(0,a.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,i=(0,a.useLayer)("trials_freemium").get("free_project",!1);return r||e||t||n||i},i=()=>{let e=(0,o.O9)(),t=(0,o.zc)(),n=(0,o.mV)(),r=(0,a.useDynamicConfig)("claude_ai_projects_limits"),i=(0,a.useLayer)("trials_freemium");if(e||t||n)return;let l=r.get("max_free_projects",0);return l>0?l:+!!i.get("free_project",!1)}},0xe41b440d:(e,t,n)=>{n.d(t,{i:()=>i,r:()=>l});var o=n(0x9f369389),a=n(0x394ef833);let r=e=>{var t;null===o.Fd||void 0===o.Fd||null==(t=o.Fd.setDraftSessionFolders)||t.call(o.Fd,e)},i=(0,a.v)((e,t)=>({selectedFolders:[],setSelectedFolders:n=>{r(n),e({selectedFolders:n,forceChat:!(n.length>0)&&t().forceChat})},toggleSelectedFolder:t=>e(e=>{let n=e.selectedFolders.includes(t),o=n?e.selectedFolders.filter(e=>e!==t):[...e.selectedFolders,t];return r(o),{selectedFolders:o,forceChat:(!(o.length>0)||!!n)&&e.forceChat}}),clearSelectedFolders:()=>{e({selectedFolders:[]}),r([])},forceChat:!1,setForceChat:n=>{e({forceChat:n,selectedFolders:n?[]:t().selectedFolders}),n&&r([])},toggleForceChat:()=>e(e=>{let t=!e.forceChat;return t&&r([]),{forceChat:t,selectedFolders:t?[]:e.selectedFolders}}),pendingFolderForTrustCheck:null,setPendingFolderForTrustCheck:t=>e({pendingFolderForTrustCheck:t}),recentSessions:[],setRecentSessions:t=>e({recentSessions:t}),fetchRecentSessions:async()=>{(null===o.Fd||void 0===o.Fd?void 0:o.Fd.getAll)&&e({recentSessions:await o.Fd.getAll()})}}));function l(e){let t=[...e].sort((e,t)=>{var n,o;return(null!=(n=t.createdAt)?n:0)-(null!=(o=e.createdAt)?o:0)}),n=[],o=new Set;for(let e of t)if(!e.isArchived)for(let t of e.userSelectedFolders||[]){var a;if(!o.has(t)&&(o.add(t),n.push({path:t,displayName:null!=(a=t.split("/").pop())?a:t,type:"folder"}),n.length>=5))break}return n}},0xefe6388f:(e,t,n)=>{n.d(t,{d:()=>s});var o=n(0x19405b970);n(0x9845e38c);var a=n(0x253a5c787),r=n(0xfc89b4a4),i=n(0xf32c56dd);let l=new Set(["shrew","pipit"]);function s(e){let{track:t}=(0,i.st)(),n=(0,r.useRef)(t);(0,r.useEffect)(()=>{n.current=t},[t]);let s=(0,o.ul)(),d=(0,r.useCallback)((t,o)=>{(0,n.current)({event_key:"claudeai.storage.error",operation:"setItem",source:e,key:t,error_name:o.name}),(0,a.Cp)(o,{tags:{source:e},extra:{key:t,operation:"setItem"},level:"warning"})},[e]);return(0,r.useMemo)(()=>(function(e){let{storage:t,onError:n,shouldThrow:o=()=>!0}=e;return new Proxy(t,{get(e,t,a){if("setItem"===t)return function(t,a){try{e.setItem(t,a)}catch(e){if(n(t,e),o(t,e))throw e}};let r=Reflect.get(e,t,e);return"function"==typeof r?r.bind(e):r}})})({storage:s,onError:d,shouldThrow:()=>!l.has(e)}),[d,e,s])}},0x11ac491e7:(e,t,n)=>{n.d(t,{v:()=>o});let o=(e,t)=>e[t]||{status:"unavailable"}},0x18e5c6e75:(e,t,n)=>{function o(e){let t=e,n="",o=0;for(;t!==n&&o<10;)n=t,t=(t=(t=(t=t.normalize("NFKC")).replace(RegExp("[\\p{Cf}\\p{Co}\\p{Cn}]","gu"),e=>"‌"===e||"‍"===e?e:"")).replace(RegExp("[\\p{Cc}]","gu"),e=>"\n"===e||"	"===e||"\r"===e?e:"")).replace(/[\u200B\u200E\u200F]/g,"").replace(/[\u202A-\u202E]/g,"").replace(/[\u2066-\u2069]/g,"").replace(/[\uFEFF]/g,"").replace(/[\uE000-\uF8FF]/g,""),o++;if(o>=10)throw Error("Unicode sanitization reached maximum iterations (".concat(10,") for input: ").concat(e.slice(0,100)));return t}n.d(t,{M:()=>function e(t){if("string"==typeof t)return o(t);if(Array.isArray(t))return t.map(e);if(null!==t&&"object"==typeof t){let n={};for(let[o,a]of Object.entries(t))n[e(o)]=e(a);return n}return t},P:()=>o})},0x19405b970:(e,t,n)=>{n.d(t,{ul:()=>i});let o={};class a{clear(){}getItem(e){return null}key(e){return null}removeItem(e){}setItem(e,t){}constructor(){this.length=0}}let r=new a,i=()=>(()=>{if(!window.localStorage)return!1;if(void 0===o.localStorageSupported){let e=!!("localStorage"in window&&window.localStorage);if(e)try{localStorage.setItem("test.localStorageSupported","true")}catch(t){e=!1}o.localStorageSupported=e}return o.localStorageSupported})()?window.localStorage:r},0x1b09c791a:(e,t,n)=>{n.d(t,{Un:()=>d,Uu:()=>u,nc:()=>f,qU:()=>p});var o=n(0x217c3a772),a=n(0xe41b440d),r=n(0x11ac491e7),i=n(0x2252bfeb8),l=n(0xac309a83),s=n(0xfc89b4a4);let d=()=>{let e=(0,l.fS)("cowork_unified"),t=p();return(0,s.useMemo)(()=>e?t.loading?{loading:!0,enabled:void 0}:{loading:!1,enabled:t.enabled}:{loading:!1,enabled:!1},[e,t])},u=()=>{let e=d(),t=(0,a.i)(e=>e.forceChat),n=e.loading,o=e.enabled;return(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n||!o?"cowork":t||e.projectUuid||e.researchMode||e.webSearch||e.googleDrive||e.github||e.forceChat?"chat":"cowork"},[n,o,t])},c=["Darwin only","arm64 only","minimum macOS version not met","enterprise_disabled","user_disabled"],p=()=>{let e=(0,l.fS)("yukon_silver"),{loading:t,isSupported:n,unsupportedReason:a}=f(),r=(0,o.B)();return t?{loading:!0,flagEnabled:void 0,supported:void 0,enabled:void 0,unsupportedReason:void 0,warnings:void 0,showTab:void 0,showDisabledBanner:void 0}:{loading:!1,...function(e,t,n,o){let a=n&&c.includes(n),r=t||!a&&void 0!==n,i=a?n:void 0,l=[];n&&!a&&l.push(n),o&&l.push("desktop_version_outdated");let s=!t&&!n,d=e&&"Darwin only"!==n&&!s;return{flagEnabled:e,supported:r,enabled:e&&r,unsupportedReason:i,warnings:l,showTab:d,showDisabledBanner:d&&!r}}(e,null!=n&&n,a,r)}},f=()=>{let[e,t]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(null===i.lX||void 0===i.lX?void 0:i.lX.getSupportedFeatures)&&i.lX.getSupportedFeatures().then(e=>{t(e)})},[]),!e)return{loading:!0,isSupported:void 0,unsupportedReason:void 0};let n=(0,r.v)(e,"yukonSilver");return{loading:!1,isSupported:"supported"===n.status,unsupportedReason:"unsupported"===n.status?n.reason:void 0}}},0x1b910c896:(e,t,n)=>{function o(){var e,t;return(null==(t=window.process)||null==(e=t.versions)?void 0:e.electron)&&window.process.platform||null}function a(){var e,t;return(null==(t=window.process)||null==(e=t.versions)?void 0:e.electron)&&window.process.version||null}function r(){if("undefined"==typeof navigator)return;let e=navigator.userAgent,t=e.match(/ClaudeNest\/(\d+\.\d+\.\d+)/);if(t)return{build:"ClaudeNest",version:t[1]};let n=e.match(/Claude\/(\d+\.\d+\.\d+)/);if(n)return{build:"Claude",version:n[1]}}n.d(t,{B7:()=>r,k1:()=>a,uV:()=>o})},0x1c12b3087:(e,t,n)=>{n.d(t,{BN:()=>c,EL:()=>w,Fj:()=>S,Jy:()=>p,N3:()=>v,QN:()=>x,QT:()=>g,RK:()=>T,TQ:()=>C,Tc:()=>h,aJ:()=>j,aQ:()=>m,fT:()=>_,jM:()=>f,jw:()=>y,lE:()=>b});var o=n(0xefe6388f);n(0x9845e38c);var a=n(0xfc89b4a4),r=n(0x394ef833),i=n(0x107838ca5),l=n(0x57fb2d0b);let s=a.createContext(null),d=null;function u(e,t){let n=a.useContext(s),u=(0,o.d)("bushy"),c=n||(d||({store:d}=(0,l.E)({storage:u})),d);return(0,r.P)(c,(0,i.k)(e))}function c(){let e=a.useContext(s);if(!e)throw Error("ChatInputStore not found. Make sure ChatInputProvider wraps your component.");return e}function p(e){let t=c();return(0,r.P)(t,(0,i.k)(e))}let f=s.Provider,g=()=>p(e=>(e=>{let t=e.tipTapEditorState;return{prompt:e.getPrompt(),tipTapEditorState:t,isPromptUnsafe:"__ant_unsafe"in t&&!!t.__ant_unsafe}})(e)),v=()=>p(e=>!e.getPrompt().trim()),m=()=>p(e=>!!e.getPrompt().trim()||e.isSending),y=()=>{let e=a.useContext(s),t=u(e=>e.conversation,"useChatInputConversationOnly");return e?t:void 0},S=()=>u(e=>({pendingConversationSettings:e.pendingConversationSettings,setPendingConversationSettings:e.setPendingConversationSettings}),"useChatInputPendingConversationSettings");function h(e,t){return u(e,t)}let b=()=>u(e=>({syncSourceUuids:e.syncSourceUuids,setSyncSourceUuids:e.setSyncSourceUuids,projectUuid:e.projectUuid,conversation:e.conversation}),"useChatInputSync"),x=()=>u(e=>e.projectUuid,"useChatInputProjectUuid"),w=()=>u(e=>e.setProjectUuid,"useChatInputSetProjectUuid"),_=()=>u(e=>({isUploadingDrive:e.isUploadingDriveSync,setIsUploadingDriveSync:e.setIsUploadingDriveSync}),"useChatInputUploadDrive"),C=()=>u(e=>({model:e.model,setModel:e.setModel}),"useChatInputModel"),T=()=>u(e=>({personalizedStyle:e.personalizedStyle,setPersonalizedStyle:e.setPersonalizedStyle}),"useChatInputPersonalizedStyle"),j=()=>u(e=>({getPrompt:e.getPrompt,setPrompt:e.setPrompt,focusInput:e.focusInput}),"useChatInputPrefill")},0x217c3a772:(e,t,n)=>{n.d(t,{B:()=>f,X:()=>g});var o=n(0x22102fd88),a=n(0xac309a83),r=n(0x151b261be),i=n(0x1ab362a20),l=n(0xfc89b4a4),s=n(0x38e6572),d=n(0xd1a44e2e),u=n(0x156c4e43b),c=n(0x1b910c896);let p=u.Ik({latest_version_nest:u.Yj(),latest_version_prod:u.Yj()});function f(){let e=(0,c.B7)(),t=(0,a.iW)("desktop_latest_versions",{latest_version_nest:"0.0.0",latest_version_prod:"0.0.0"},p);return(0,l.useMemo)(()=>{var n;if(!e)return!1;let o=(null==e?void 0:e.build)==="ClaudeNest"?t.latest_version_nest:t.latest_version_prod;return"0.0.0"!==o&&!!(0,d.valid)(null==e?void 0:e.version)&&!!(0,d.valid)(o)&&(0,d.lt)(null!=(n=null==e?void 0:e.version)?n:"0.0.0",o)},[e,t])}let g=(0,l.memo)(function(e){let{onDismiss:t}=e;return(0,o.jsx)("div",{className:"bg-bg-200 border-0.5 border-border-400 rounded-xl p-4 w-full max-w-2xl mx-auto mb-3",children:(0,o.jsxs)("div",{className:"flex items-start gap-3",children:[(0,o.jsx)("div",{className:"flex items-center justify-center pl-1.5 pt-0.5",children:(0,o.jsx)(r.t,{className:"w-5 h-5 text-text-300 shrink-0",weight:"fill"})}),(0,o.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-text-000",children:(0,o.jsx)(s.A,{defaultMessage:"Update available",id:"3uUZCr3t5a"})}),(0,o.jsx)("span",{className:"text-sm text-text-200",children:(0,o.jsx)(s.A,{defaultMessage:"There's an update available for {appName}. Install and restart your app for the best experience.",id:"/DfxHZgKw2",values:{appName:"Claude Desktop"}})})]}),t&&(0,o.jsx)("button",{onClick:t,className:"flex items-center justify-center p-1 hover:bg-bg-300 rounded transition-colors","aria-label":"Dismiss warning",children:(0,o.jsx)(i.X,{className:"w-4 h-4 text-text-300",weight:"bold"})})]})})})},0x2252bfeb8:(e,t,n)=>{var o,a,r,i,l,s,d,u;n.d(t,{Fd:()=>v,TQ:()=>g,W$:()=>y,YQ:()=>p,a8:()=>f,lX:()=>S,oO:()=>c,un:()=>m});let c=null==(o=globalThis["claude.settings"])?void 0:o.AppConfig,p=null==(a=globalThis["claude.settings"])?void 0:a.Startup,f=null==(r=globalThis["claude.settings"])?void 0:r.GlobalShortcut,g=null==(i=globalThis["claude.settings"])?void 0:i.MCP,v=null==(l=globalThis["claude.settings"])?void 0:l.Extensions,m=null==(s=globalThis["claude.settings"])?void 0:s.FilePickers,y=null==(d=globalThis["claude.settings"])?void 0:d.AppPreferences,S=null==(u=globalThis["claude.settings"])?void 0:u.AppFeatures}}]);